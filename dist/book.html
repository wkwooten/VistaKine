<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VistaKine Physics</title>

    <!-- Base path configuration for multiple environments -->
    <script>
        // Handle base path for different environments
        window.vistaKineBasePath = '';
        window.isGitHubPages = false;
        window.isLocalDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

        // Check if we're on GitHub Pages
        if (window.location.hostname.includes('github.io')) {
            // Extract repository name from URL for GitHub Pages
            const pathParts = window.location.pathname.split('/').filter(p => p.length > 0);
            const repoName = pathParts.length > 0 ? pathParts[0] : '';
            window.vistaKineBasePath = repoName ? `/${repoName}` : '';
            window.isGitHubPages = true;
        }

        // Path helper that works in both environments
        window.getPath = function(path) {
            if (!path) return '';

            // Strip leading slashes for consistency
            path = path.replace(/^\/+/, '');

            // For GitHub Pages, add the base path
            if (window.isGitHubPages) {
                return window.vistaKineBasePath + '/' + path;
            }

            // For local dev, use relative path
            return path;
        };
    </script>

    <!-- CSS Files - works in both environments -->

    <!-- Phosphor Icons - use CDN for reliability -->
    <link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/bold/style.css" />
    <link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/regular/style.css" />

    <!-- Import local modules - works in both environments -->

    <!-- VistaKine Main Framework - load after three-setup.js -->
    <script defer src="js/core/main.js"></script>
  <script type="module" crossorigin src="/VistaKine/assets/main-DFyD83nU.js"></script>
  <link rel="stylesheet" crossorigin href="/VistaKine/assets/main-D-S4-sB9.css">
</head>
<body>
    <!-- Navigation toggle button - Mobile/tablet only -->
    <button id="show-nav-toggle" class="show-nav-toggle" aria-label="Show navigation">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 256 256"><path fill="currentColor" d="M228 128a12 12 0 0 1-12 12H40a12 12 0 0 1 0-24h176a12 12 0 0 1 12 12M40 76h176a12 12 0 0 0 0-24H40a12 12 0 0 0 0 24m176 104H40a12 12 0 0 0 0 24h176a12 12 0 0 0 0-24"/></svg>
    </button>

    <!-- App layout grid container -->
    <div class="app-layout">
        <!-- Main sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="ph ph-polygon"></i>
                    <h1>VistaKine</h1>
                </div>
                <div class="sidebar-actions">
                    <!-- Close button for mobile/tablet -->
                    <button class="sidebar-close" aria-label="Close sidebar">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 256 256"><path fill="currentColor" d="M165.66 101.66L139.31 128l26.35 26.34a8 8 0 0 1-11.32 11.32L128 139.31l-26.34 26.35a8 8 0 0 1-11.32-11.32L116.69 128l-26.35-26.34a8 8 0 0 1 11.32-11.32L128 116.69l26.34-26.35a8 8 0 0 1 11.32 11.32"/></svg>
                    </button>
                </div>
            </div>

            <div class="search-container">
                <input type="text" placeholder="Search textbook..." aria-label="Search">
                <i class="ph ph-magnifying-glass"></i>
            </div>

            <nav class="sidebar-nav">
                <a href="#cover" class="nav-chapter">
                    <div class="chapter-number"><i class="ph ph-house"></i></div>
                    <span>Cover Page</span>
                </a>

                <a href="#about" class="nav-chapter">
                    <div class="chapter-number"><i class="ph ph-info"></i></div>
                    <span>About</span>
                </a>

                <a href="#chapters" class="nav-chapter">
                    <div class="chapter-number"><i class="ph ph-books"></i></div>
                    <span>Chapters</span>
                </a>

                <a href="#chapter1-intro" class="nav-chapter">
                    <div class="chapter-number">1</div>
                    <span>Understanding 3D Space</span>
                </a>
                <div class="subchapter-list">
                    <a href="#chapter1-intro" class="nav-subchapter">1.1 Introduction to 3D Coordinates</a>
                    <a href="#chapter1-coordinates" class="nav-subchapter">1.2 Coordinate Systems</a>
                    <a href="#chapter1-matrices" class="nav-subchapter">1.3 Matrices as Transformations</a>
                    <a href="#chapter1-matrix-lab" class="nav-subchapter">1.4 Interactive Matrix Lab</a>
                </div>

                <a href="#chapter2-intro" class="nav-chapter">
                    <div class="chapter-number">2</div>
                    <span>Vector Fundamentals</span>
                </a>
                <div class="subchapter-list">
                    <a href="#chapter2-intro" class="nav-subchapter">2.1 What are Vectors?</a>
                    <a href="#chapter2-operations" class="nav-subchapter">2.2 Vector Operations</a>
                    <a href="#chapter2-dot-products" class="nav-subchapter">2.3 Dot Products</a>
                    <a href="#chapter2-applications" class="nav-subchapter">2.4 Applications: Force and Displacement</a>
                </div>

                <a href="#chapter3-definition" class="nav-chapter">
                    <div class="chapter-number">3</div>
                    <span>Cross Products and Applications</span>
                </a>
                <div class="subchapter-list">
                    <a href="#chapter3-definition" class="nav-subchapter">3.1 Cross Product Definition</a>
                    <a href="#chapter3-geometric" class="nav-subchapter">3.2 Geometric Interpretation</a>
                    <a href="#chapter3-applications" class="nav-subchapter">3.3 Applications: Torque and Angular Momentum</a>
                    <a href="#chapter3-triple" class="nav-subchapter">3.4 Triple Products and Volume</a>
                </div>

                <a href="#physics-playground" class="nav-chapter">
                    <div class="chapter-number"><i class="ph ph-atom"></i></div>
                    <span>Experimental Features</span>
                </a>
                <div class="subchapter-list">
                    <a href="#physics-playground" class="nav-subchapter">Physics Playground</a>
                </div>
            </nav>

            <!-- Add the resize handle -->
            <div class="sidebar-resize-handle" data-tooltip="Resize sidebar">
                <div class="resize-handle-line"></div>
            </div>
        </aside>

        <!-- Main content container -->
        <main class="main-content" id="book-content">
            <!-- Section containers -->
            <section id="cover" class="section-container">
                <div class="section-content" data-src="sections/cover.html">
                    <div class="loading-placeholder">Loading cover...</div>
                </div>
            </section>

            <section id="about" class="section-container">
                <div class="section-content" data-src="sections/about.html">
                    <div class="loading-placeholder">Loading about section...</div>
                </div>
            </section>

            <section id="chapters" class="section-container">
                <div class="section-content" data-src="sections/chapters.html">
                    <div class="loading-placeholder">Loading chapters...</div>
                </div>
            </section>

            <!-- Chapter 1 sections -->
            <section id="chapter1-intro" class="section-container">
                <div class="section-content" data-src="sections/chapter1-intro.html">
                    <div class="loading-placeholder">Loading section 1.1...</div>
                </div>
            </section>

            <section id="chapter1-coordinates" class="section-container">
                <div class="section-content" data-src="sections/chapter1-coordinates.html">
                    <div class="loading-placeholder">Loading section 1.2...</div>
                </div>
            </section>

            <section id="chapter1-matrices" class="section-container">
                <div class="section-content" data-src="sections/chapter1-matrices.html">
                    <div class="loading-placeholder">Loading section 1.3...</div>
                </div>
            </section>

            <section id="chapter1-matrix-lab" class="section-container">
                <div class="section-content" data-src="sections/chapter1-matrix-lab.html">
                    <div class="loading-placeholder">Loading section 1.4...</div>
                </div>
            </section>

            <!-- Chapter 2 sections -->
            <section id="chapter2-intro" class="section-container">
                <div class="section-content" data-src="sections/chapter2-intro.html">
                    <div class="loading-placeholder">Loading section 2.1...</div>
                </div>
            </section>

            <section id="chapter2-operations" class="section-container">
                <div class="section-content" data-src="sections/chapter2-operations.html">
                    <div class="loading-placeholder">Loading section 2.2...</div>
                </div>
            </section>

            <section id="chapter2-dot-products" class="section-container">
                <div class="section-content" data-src="sections/chapter2-dot-products.html">
                    <div class="loading-placeholder">Loading section 2.3...</div>
                </div>
            </section>

            <section id="chapter2-applications" class="section-container">
                <div class="section-content" data-src="sections/chapter2-applications.html">
                    <div class="loading-placeholder">Loading section 2.4...</div>
                </div>
            </section>

            <!-- Chapter 3 sections -->
            <section id="chapter3-definition" class="section-container">
                <div class="section-content" data-src="sections/chapter3-definition.html">
                    <div class="loading-placeholder">Loading section 3.1...</div>
                </div>
            </section>

            <section id="chapter3-geometric" class="section-container">
                <div class="section-content" data-src="sections/chapter3-geometric.html">
                    <div class="loading-placeholder">Loading section 3.2...</div>
                </div>
            </section>

            <section id="chapter3-applications" class="section-container">
                <div class="section-content" data-src="sections/chapter3-applications.html">
                    <div class="loading-placeholder">Loading section 3.3...</div>
                </div>
            </section>

            <section id="chapter3-triple" class="section-container">
                <div class="section-content" data-src="sections/chapter3-triple.html">
                    <div class="loading-placeholder">Loading section 3.4...</div>
                </div>
            </section>

            <section id="physics-playground" class="section-container">
                <div class="section-content" data-src="sections/physics-playground.html">
                    <div class="loading-placeholder">Loading Physics Playground...</div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
