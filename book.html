<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VistaKine Physics</title>
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/book.css">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
</head>
<body>
    <!-- Reading progress indicator -->
    <div class="reading-progress" id="reading-progress"></div>

    <!-- Navigation toggle button -->
    <button id="show-nav-toggle" class="show-nav-toggle" aria-label="Show navigation">
        <i class="ph ph-list"></i>
    </button>

    <!-- Sidebar navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="ph ph-projector-screen-chart"></i>
                <h1>VistaKine</h1>
            </div>
            <button class="mobile-toggle" aria-label="Toggle navigation">
                <i class="ph ph-list"></i>
            </button>
        </div>

        <div class="search-container">
            <input type="text" placeholder="Search textbook..." aria-label="Search">
            <i class="ph ph-magnifying-glass"></i>
        </div>

        <nav class="sidebar-nav">
            <a href="#cover" class="nav-chapter">
                <div class="chapter-number">0</div>
                <span>Cover Page</span>
            </a>

            <a href="#about" class="nav-chapter">
                <div class="chapter-number">0</div>
                <span>About</span>
            </a>

            <a href="#chapters" class="nav-chapter">
                <div class="chapter-number">C</div>
                <span>Chapters</span>
            </a>

            <a href="#chapter1-intro" class="nav-chapter">
                <div class="chapter-number">1</div>
                <span>Understanding 3D Space</span>
            </a>
            <div class="subchapter-list">
                <a href="#chapter1-intro" class="nav-subchapter">1.1 Introduction to 3D Coordinates</a>
                <a href="#chapter1-coordinates" class="nav-subchapter">1.2 Coordinate Systems</a>
                <a href="#chapter1-matrices" class="nav-subchapter">1.3 Matrices as Transformations</a>
                <a href="#chapter1-matrix-lab" class="nav-subchapter">1.4 Interactive Matrix Lab</a>
            </div>

            <a href="#chapter2-intro" class="nav-chapter">
                <div class="chapter-number">2</div>
                <span>Vector Fundamentals</span>
            </a>
            <div class="subchapter-list">
                <a href="#chapter2-intro" class="nav-subchapter">2.1 What are Vectors?</a>
                <a href="#chapter2-operations" class="nav-subchapter">2.2 Vector Operations</a>
                <a href="#chapter2-dot-products" class="nav-subchapter">2.3 Dot Products</a>
                <a href="#chapter2-applications" class="nav-subchapter">2.4 Applications: Force and Displacement</a>
            </div>

            <a href="#chapter3-definition" class="nav-chapter">
                <div class="chapter-number">3</div>
                <span>Cross Products and Applications</span>
            </a>
            <div class="subchapter-list">
                <a href="#chapter3-definition" class="nav-subchapter">3.1 Cross Product Definition</a>
                <a href="#chapter3-geometric" class="nav-subchapter">3.2 Geometric Interpretation</a>
                <a href="#chapter3-applications" class="nav-subchapter">3.3 Applications: Torque and Angular Momentum</a>
                <a href="#chapter3-triple" class="nav-subchapter">3.4 Triple Products and Volume</a>
            </div>
        </nav>

        <!-- Add the resize handle -->
        <div class="sidebar-resize-handle" data-tooltip="Expand sidebar">
            <div class="resize-handle-line"></div>
        </div>
    </div>

    <!-- Main content container -->
    <main id="book-content">
        <!-- Section containers -->
        <section id="cover" class="section-container">
            <div class="section-content" data-src="sections/cover.html">
                <div class="loading-placeholder">Loading cover...</div>
            </div>
        </section>

        <section id="about" class="section-container">
            <div class="section-content" data-src="sections/about.html">
                <div class="loading-placeholder">Loading about section...</div>
            </div>
        </section>

        <section id="chapters" class="section-container">
            <div class="section-content" data-src="sections/chapters.html">
                <div class="loading-placeholder">Loading chapters...</div>
            </div>
        </section>

        <!-- Chapter 1 sections -->
        <section id="chapter1-intro" class="section-container">
            <div class="section-content" data-src="sections/chapter1-intro.html">
                <div class="loading-placeholder">Loading section 1.1...</div>
            </div>
        </section>

        <section id="chapter1-coordinates" class="section-container">
            <div class="section-content" data-src="sections/chapter1-coordinates.html">
                <div class="loading-placeholder">Loading section 1.2...</div>
            </div>
        </section>

        <section id="chapter1-matrices" class="section-container">
            <div class="section-content" data-src="sections/chapter1-matrices.html">
                <div class="loading-placeholder">Loading section 1.3...</div>
            </div>
        </section>

        <section id="chapter1-matrix-lab" class="section-container">
            <div class="section-content" data-src="sections/chapter1-matrix-lab.html">
                <div class="loading-placeholder">Loading section 1.4...</div>
            </div>
        </section>

        <!-- Chapter 2 sections -->
        <section id="chapter2-intro" class="section-container">
            <div class="section-content" data-src="sections/chapter2-intro.html">
                <div class="loading-placeholder">Loading section 2.1...</div>
            </div>
        </section>

        <section id="chapter2-operations" class="section-container">
            <div class="section-content" data-src="sections/chapter2-operations.html">
                <div class="loading-placeholder">Loading section 2.2...</div>
            </div>
        </section>

        <section id="chapter2-dot-products" class="section-container">
            <div class="section-content" data-src="sections/chapter2-dot-products.html">
                <div class="loading-placeholder">Loading section 2.3...</div>
            </div>
        </section>

        <section id="chapter2-applications" class="section-container">
            <div class="section-content" data-src="sections/chapter2-applications.html">
                <div class="loading-placeholder">Loading section 2.4...</div>
            </div>
        </section>

        <!-- Chapter 3 sections -->
        <section id="chapter3-definition" class="section-container">
            <div class="section-content" data-src="sections/chapter3-definition.html">
                <div class="loading-placeholder">Loading section 3.1...</div>
            </div>
        </section>

        <section id="chapter3-geometric" class="section-container">
            <div class="section-content" data-src="sections/chapter3-geometric.html">
                <div class="loading-placeholder">Loading section 3.2...</div>
            </div>
        </section>

        <section id="chapter3-applications" class="section-container">
            <div class="section-content" data-src="sections/chapter3-applications.html">
                <div class="loading-placeholder">Loading section 3.3...</div>
            </div>
        </section>

        <section id="chapter3-triple" class="section-container">
            <div class="section-content" data-src="sections/chapter3-triple.html">
                <div class="loading-placeholder">Loading section 3.4...</div>
            </div>
        </section>
    </main>

    <!-- Minimal Bottom Navigation -->
    <div class="bottom-nav-trigger"></div>
    <div class="bottom-nav">
        <button class="bottom-nav-button prev-nav" aria-label="Previous Section">
            <i class="ph ph-caret-left"></i> Previous
        </button>
        <div class="bottom-nav-section">
            <span class="current-section-name">Current Section</span>
        </div>
        <button class="bottom-nav-button next-nav" aria-label="Next Section">
            Next <i class="ph ph-caret-right"></i>
        </button>
    </div>

    <script src="js/book-loader.js"></script>
    <script src="js/sidebar-resize.js"></script>

    <!-- Page navigation script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get all section links
            const sectionLinks = document.querySelectorAll('.nav-chapter, .nav-subchapter');

            // Add page numbers to sidebar navigation
            sectionLinks.forEach((link, index) => {
                // Skip the cover, about, and chapters pages
                if (index > 2) {
                    const pageNum = document.createElement('span');
                    pageNum.className = 'page-num';
                    pageNum.textContent = index - 2; // Adjust page number to start after non-numbered sections
                    link.appendChild(pageNum);
                }
            });

            // Setup bottom navigation
            const prevNavBtn = document.querySelector('.prev-nav');
            const nextNavBtn = document.querySelector('.next-nav');
            const currentSectionSpan = document.querySelector('.current-section-name');

            // Update the current section name based on active section
            function updateCurrentSection() {
                const activeSection = document.querySelector('.nav-chapter.active, .nav-subchapter.active');
                if (activeSection) {
                    currentSectionSpan.textContent = activeSection.textContent.trim().replace(/\d+$/, '');
                }
            }

            // Handle navigation button clicks
            prevNavBtn.addEventListener('click', function() {
                const activeLink = document.querySelector('.nav-chapter.active, .nav-subchapter.active');
                if (activeLink) {
                    const allLinks = Array.from(sectionLinks);
                    const currentIndex = allLinks.indexOf(activeLink);
                    if (currentIndex > 0) {
                        const prevLink = allLinks[currentIndex - 1];
                        if (prevLink && prevLink.getAttribute('href')) {
                            window.location.hash = prevLink.getAttribute('href').replace('#', '');
                        }
                    }
                }
            });

            nextNavBtn.addEventListener('click', function() {
                const activeLink = document.querySelector('.nav-chapter.active, .nav-subchapter.active');
                if (activeLink) {
                    const allLinks = Array.from(sectionLinks);
                    const currentIndex = allLinks.indexOf(activeLink);
                    if (currentIndex < allLinks.length - 1) {
                        const nextLink = allLinks[currentIndex + 1];
                        if (nextLink && nextLink.getAttribute('href')) {
                            window.location.hash = nextLink.getAttribute('href').replace('#', '');
                        }
                    }
                }
            });

            // Call this initially and whenever the hash changes
            updateCurrentSection();
            window.addEventListener('hashchange', updateCurrentSection);
        });
    </script>
</body>
</html>
